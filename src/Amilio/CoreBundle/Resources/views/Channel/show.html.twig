{% extends 'base.html.twig' %}

{% block title %}{{ channel.name }}{% endblock %}

{% block javascripts%}
    {{ parent() }}

    <script src="/includes/isotope/isotope.pkgd.min.js"></script>

{% endblock  javascripts%}

{% block body %}

    <div class="head">
        {% if channel.image %}
            <div style="width: 100%; background-image: url({{ channel.image }}); background-repeat:no-repeat; background-position: center; height: 400px;">
        {% else %}
            <div style="width: 100%; background-color: #3d728c; height: 400px;">
        {% endif %}
            </div>
            <div style="width: 100%; color: #3a4046">
                 <h1>{{ channel.name }}</h1>
            </div>
    </div>
    
    <div>
            <div class="center" style="width: 1200px; padding-bottom: 50px; background-color: #f9f9f9;font-family: 'Roboto', sans-serif; line-height: 24px; font-size: 12px;">
                    <p style="padding: 30px">{{ channel.description }}</p>
            </div>
        </div>
    <div>
    
        <div id="product_add" style="position: relative;top: -30px;">
        <a onclick='showNewProductModal()'">
            <img src="/images/add.png" /><br />
            Produkt <br />hinzuf&uuml;gen
        </a>
                
        <div id="newProductModal" style="display: none; background-color: white; width: 500px; border: 1px solid #000; padding: 30px; position: relative; top: -300px">
        </div>
        
        <div id="showProductModal" style="display: none; background-color: white; width: 700px; border: 1px solid #000; padding: 30px; position: relative; top: -600px">
        </div>
    </div>
    <script>
      function showNewProductModal()
      {
    	  $.get( "{{ path("amilio_core_product_new", {'channelId': channel.id }) }}", function( data ) {
    		  $("#newProductModal").modal({ opacity:80, overlayCss: {backgroundColor:"#000"}});
    		  $("#newProductModal").html( data );
    	  });    	 
      }

      function showProductModal(id, name)
      {
    	  var url = '{{ path("amilio_core_product_show", {'product': 'productid', 'canonicalName': 'canonicalname' })  }}'; 
    	  url = url.replace("productid", id);
    	  url = url.replace("canonicalname", name);
          
    	  $.get( url, function( data ) {
    		  window.history.replaceState("object or string", "Title", url);
    		  $("#showProductModal").modal({ opacity:80, overlayCss: {backgroundColor:"#000"}});
    		  $("#showProductModal").html( data );
    	  });    	 
      }
    </script>

    <div style="background-color: white">
        <div class="content">
        
            <div id="productlist">
                        
                {% for product in products %}
                    <div class="item" onmouseover="$('#product_{{ product.id }}').show()" onmouseout="$('#product_{{ product.id }}').hide()">
                        <div style="position: relative; height: 0; top: 80px; display: none" id="product_{{ product.id }}">
                            <div style="width: 145px; text-align: center; background-color: #f69a2f; padding: 10px; margin-right: 10px; margin-left: 10px; font-size: 14px; color: white;"><a onclick="showProductModal('{{ product.id }}', '{{ product.canonicalName }}')" href="#" style="color: white">zur Produktseite</a></div> 
                            <div style="height: 5px;"></div>
                            <div style="width: 100px; text-align: center; background-color: #ea691b; padding: 10px; margin-left: 30px; margin-right: 10px; font-size: 12px; color: white;"><a href="{{ product.url }}" target="_blank" style="color: white">direkt zum Shop</a></div>
                        </div>
                        <div class="image">
                            <img src="{{ product.image }}">
                        </div>    
                        <div class="title">
                             {{ product.name }}
                        </div>
                   </div>
                {% endfor %}
                
            <script type="text/javascript">
                var $container = $('#productlist');
                // init
                $container.isotope({
                  // options
                  itemSelector: '.item',
                  layoutMode: 'masonry'
                });
        
            </script>
            
            </div>
        </div>
    </div>
{% endblock %}